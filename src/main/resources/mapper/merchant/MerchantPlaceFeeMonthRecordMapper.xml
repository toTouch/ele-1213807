<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xiliulou.electricity.mapper.merchant.MerchantPlaceFeeMonthRecordMapper">
    <insert id="save">
        insert into t_merchant_place_fee_month_record  (month_date , place_id, eid, sn, rent_start_time ,rent_end_time,rent_days,place_fee,month_place_fee,
            tenant_id, del_flag, create_time, update_time)
        values (#{item.monthDate}, #{item.placeId}, #{item.eid}, #{item.sn}, #{item.rentStartTime}, #{item.rentEndTime}, #{item.rentDays}, #{item.placeFee},
                #{item.monthPlaceFee}, #{item.tenantId}), #{item.delFlag}, #{item.createTime}, #{item.updateTime})
    </insert>
    
    <select id="selectListBySettlementTime" resultType="com.xiliulou.electricity.entity.merchant.MerchantPlaceFeeMonthRecord">
        select month_date , place_id, eid, sn, rent_start_time ,rent_end_time,rent_days,place_fee,month_place_fee,
            tenant_id, del_flag, create_time, update_time
        from t_merchant_place_fee_month_record
        where month_date = #{date}
          and tenant_id = #{tenantId}
          <if test="franchiseeId != null">
            and franchisee_id = #{franchiseeId}
          </if>
          and del_flag = 0 order by place_id desc
    </select>
    
    <select id="selectList" resultType="com.xiliulou.electricity.entity.merchant.MerchantPlaceFeeMonthRecord">
        select
        month_date , place_id, eid, sn, rent_start_time ,rent_end_time,rent_days,place_fee,month_place_fee,id,cabinet_end_bind,
        tenant_id, del_flag, create_time, update_time
        from t_merchant_place_fee_month_record
        where
        del_flag = 0
        <if test="placeIdList != null and placeIdList.size() > 0">
            and place_id in
            <foreach collection="placeIdList" item="placeId" close=")" open="(" separator=",">
                #{placeId}
            </foreach>
        </if>
        
        <if test="monthList != null and monthList.size() > 0">
            and month_date in
            <foreach collection="monthList" item="month" close=")" open="(" separator=",">
                #{month}
            </foreach>
        </if>
    </select>
</mapper>