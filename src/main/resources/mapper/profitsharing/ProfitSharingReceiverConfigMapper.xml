<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xiliulou.electricity.mapper.profitsharing.ProfitSharingReceiverConfigMapper">
    
    <resultMap type="com.xiliulou.electricity.entity.profitsharing.ProfitSharingReceiverConfig" id="ProfitSharingReceiverConfigMap">
        <result property="id" column="id" jdbcType="BIGINT"/>
        <result property="tenantId" column="tenant_id" jdbcType="INTEGER"/>
        <result property="franchiseeId" column="franchisee_id" jdbcType="BIGINT"/>
        <result property="profitSharingConfigId" column="profit_sharing_config_id" jdbcType="BIGINT"/>
        <result property="account" column="account" jdbcType="VARCHAR"/>
        <result property="receiverType" column="receiver_type" jdbcType="INTEGER"/>
        <result property="relationType" column="relation_type" jdbcType="VARCHAR"/>
        <result property="receiverName" column="receiver_name" jdbcType="VARCHAR"/>
        <result property="receiverStatus" column="receiver_status" jdbcType="INTEGER"/>
        <result property="scale" column="scale" jdbcType="DECIMAL"/>
        <result property="remark" column="remark" jdbcType="VARCHAR"/>
        <result property="delFlag" column="del_flag" jdbcType="INTEGER"/>
        <result property="createTime" column="create_time" jdbcType="BIGINT"/>
        <result property="updateTime" column="update_time" jdbcType="BIGINT"/>
    </resultMap>
    
    <sql id="base_column">
        id
        , tenant_id, franchisee_id, profit_sharing_config_id, account, receiver_type, receiver_name, receiver_status, scale,relation_type, del_flag, create_time, update_time    </sql>
    
    <sql id="table_name">
        t_profit_sharing_receiver_config
    </sql>
    
    <sql id="page_where">
        where
        del_flag = 0
        and tenant_id=#{tenantId}
        and
        profit_sharing_config_id
        =
        #{profitSharingConfigId}
    </sql>
    
    
    <select id="selectListByTenantIdAndProfitSharingConfigId"
        resultMap="ProfitSharingReceiverConfigMap">
        SELECT
        <include refid="base_column"/>
        from
        <include refid="table_name"/>
        where
        del_flag=0
        and tenant_id=#{tenantId}
        and profit_sharing_config_id=#{profitSharingConfigId}
    </select>
    
    <select id="selectById"
        resultMap="ProfitSharingReceiverConfigMap">
        SELECT
        <include refid="base_column"/>
        from
        <include refid="table_name"/>
        where
        del_flag=0
        and tenant_id=#{tenantId}
        and id=#{id}
    </select>
    
    <select id="selectPage"
        resultMap="ProfitSharingReceiverConfigMap">
        SELECT
        <include refid="base_column"/>
        from
        <include refid="table_name"/>
        
        <include refid="page_where"/>
        order by create_time desc
        limit #{offset} , #{size}
    </select>
    
    <select id="count"
        resultType="java.lang.Integer">
        SELECT
        count(id)
        from
        <include refid="table_name"/>
        <include refid="page_where"/>
    </select>
    <select id="selectListByTenantIdAndProfitSharingConfigIds"
        resultMap="ProfitSharingReceiverConfigMap">
        SELECT
        <include refid="base_column"/>
        from
        <include refid="table_name"/>
        where
        del_flag=0
        and tenant_id=#{tenantId}
        and profit_sharing_config_id in
        <foreach collection="profitSharingConfigIds" open="(" close=")" separator="," item="profitSharingConfigId">
            #{profitSharingConfigId}
        </foreach>
    </select>
    
    <!--新增所有列-->
    <insert id="insert" keyProperty="id" useGeneratedKeys="true">
        insert into<include refid="table_name"/>(tenant_id, franchisee_id, profit_sharing_config_id, account, receiver_type, receiver_name,relation_type, receiver_status,
        scale,remark,
        create_time, update_time)
        values (#{tenantId}, #{franchiseeId}, #{profitSharingConfigId}, #{account}, #{receiverType}, #{receiverName}, #{relationType}, #{receiverStatus}, #{scale},#{remark},
        #{createTime},
        #{updateTime})
    </insert>
    
    
    <!--通过主键修改数据-->
    <update id="update">
        update
        <include refid="table_name"/>
        <set>
            scale = #{scale},
            remark = #{remark},
            update_time = #{updateTime}
        </set>
        where id = #{id}
    </update>
    
    <update id="removeByIds">
        update
        <include refid="table_name"/>
        set update_time=#{updateTime},
        del_flag=1
        where tenant_id=#{tenantId} and id in
        <foreach collection="ids" open="(" item="id" close=")" separator=",">
            #{id}
        </foreach>
    </update>
    
    <update id="updateStatus">
        update
        <include refid="table_name"/>
        set update_time=#{updateTime},
        receiver_status=#{receiverStatus}
        where id =#{id}
    </update>
    
    <update id="removeById">
        update
        <include refid="table_name"/>
        set update_time=#{updateTime},
        del_flag=1
        where id =#{id}
    </update>


</mapper>

