<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xiliulou.electricity.mapper.userInfo.userInfoGroup.UserInfoGroupDetailHistoryMapper">
    <!-- 基础字段 -->
    <sql id="basic_field">
        id
        , uid, oldGroupIds, newGroupIds, operator, franchiseeId, tenantId, delFlag, createTime, updateTime
    </sql>
    
    <insert id="batchInsert" keyProperty="id" useGeneratedKeys="true">
        insert into t_user_info_group_detail_history(uid, old_group_Ids, new_group_Ids, operator, franchisee_id, tenant_id, create_time, update_time)
        values
        <foreach item="item" index="index" collection="detailList" separator=",">
            (#{item.uid}, #{item.oldGroupIds}, #{item.newGroupIds}, #{item.operator}, #{item.franchiseeId}, #{item.tenantId}, #{item.createTime}, #{item.updateTime})
        </foreach>
    </insert>
    
    <select id="selectListByPage" resultType="com.xiliulou.electricity.entity.userInfo.userInfoGroup.UserInfoGroupDetailHistory">
        select
        <include refid="basic_field"/>
        from t_user_info_group_detail_history where del_flag = 0 and tenant_id = #{tenantId} and uid = #{uid}
        order by id desc
        limit #{offset}, #{size}
    </select>
    
    <select id="countTotal" resultType="java.lang.Integer">
        select count(1)
        from t_user_info_group_detail_history
        where del_flag = 0
          and tenant_id = #{tenantId}
          and uid = #{uid}
    </select>

</mapper>




